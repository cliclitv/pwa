{"version":3,"sources":["serviceWorker.ts","config.ts","services/post.ts","services/dirty.ts","components/Overview.tsx","components/Recommend.tsx","components/Ranking.tsx","components/Calendar.tsx","pages/Home.tsx","services/user.ts","pages/Login.tsx","utils.ts","services/video.ts","pages/Video.tsx","pages/Post.tsx","pages/Search.tsx","components/Header.tsx","App.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","domain","list","type","tag","page","pageSize","a","status","uid","fetch","resp","json","details","id","body","result","key","getSuo","content","m","slice","props","posts","Flex","space","styles","flexWrap","marginTop","length","map","item","hAlign","vAlign","maxWidth","marginBottom","column","to","Image","src","width","height","title","useState","setPosts","useEffect","postList","then","res","Overview","getRanking","Date","getDay","day","setDay","getPostList","ret","forEach","time","split","toString","push","Menu","defaultActiveIndex","primary","items","onItemClick","_","index","console","log","wrap","gap","paddingBottom","circular","style","fontSize","padding","Recommend","Ranking","Calendar","user","cookie","getJSON","token","get","clearCache","undefined","remove","avatar","qq","test","hash","md5","login","u","method","JSON","stringify","code","set","isLogin","credentials","fields","label","required","control","as","Input","Button","display","flexDirection","alignItems","history","useHistory","Form","onSubmit","name","document","getElementById","value","pwd","goBack","alert","useQuery","URLSearchParams","useLocation","search","videos","VideoList","setVideoList","getVideoList","postId","videoList","className","uqq","alt","oid","query","justifyContent","Video","autoPlay","t","useRef","post","setPost","getPostDetails","w","clientWidth","indexOf","current","innerHTML","snarkdown","ref","getSearchList","data","setData","headerStyle","Avatar","size","image","searchStyle","fluid","icon","onKeyPress","evt","currentTarget","flexGrow","margin","Header","path","Search","Login","Home","lastTime","addEventListener","touches","preventDefault","nowTime","getTime","disableScreenScale","ReactDOM","render","darkMode","React","matchMedia","matches","setMatch","active","queryList","updateMatch","addListener","removeListener","useMediaQuery","theme","useMemo","themes","teamsDark","teams","Provider","App","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.56a1d395.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","export const domain = {\r\n  admin: \"https://admin.clicli.me\",\r\n  home: \"https://www.clicli.me\",\r\n  api: \"https://api.clicli.us\",\r\n  jx: \"https://jx.clicli.us\"\r\n};\r\n","import { domain } from \"config\";\r\n\r\nexport interface Post {\r\n  id?: string;\r\n  content?: string;\r\n  uqq?: string;\r\n  uname?: string;\r\n  uid?: number;\r\n  title?: string;\r\n  tag?: string;\r\n  time?: string;\r\n  status?: string;\r\n}\r\n\r\nexport async function list(\r\n  type: string,\r\n  tag: string,\r\n  page: number,\r\n  pageSize: number,\r\n  status = \"public\",\r\n  uid = \"\"\r\n): Promise<{ posts: Post[] }> {\r\n  const resp = await fetch(\r\n    `${domain.api}/posts?status=${status}&sort=${type}&tag=${tag}&uid=${uid}&page=${page}&pageSize=${pageSize}`\r\n  );\r\n\r\n  return resp.json();\r\n}\r\n\r\nexport async function details(id: string) {\r\n  const resp = await fetch(`${domain.api}/post/${id}`);\r\n  const body = await resp.json();\r\n  return body.result;\r\n}\r\n\r\nexport async function ranking(): Promise<{ posts: Post[] }> {\r\n  const resp = await fetch(`${domain.api}/rank`);\r\n  return resp.json();\r\n}\r\n\r\nexport async function search(key: string): Promise<{ posts: Post[] }> {\r\n  const resp = await fetch(`${domain.api}/search/posts?key=${key}`);\r\n  return resp.json();\r\n}\r\n","export function getSuo(content: string) {\r\n  let m = content.match(/suo(.+?)\\)/i);\r\n  return m\r\n    ? m[1].slice(2)\r\n    : \"https://wx4.sinaimg.cn/mw690/0060lm7Tly1fvmtrka9p5j30b40b43yo.jpg\";\r\n}\r\n","import { Flex, Image } from \"@fluentui/react\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getSuo } from \"services/dirty\";\r\nimport { Post } from \"services/post\";\r\n\r\nexport default (props: { posts: Post[] }) => {\r\n  const posts = props.posts;\r\n  return (\r\n    <Flex\r\n      space=\"around\"\r\n      styles={{\r\n        flexWrap: \"wrap\",\r\n        marginTop: \"36px\"\r\n      }}\r\n    >\r\n      {posts.length > 0 &&\r\n        posts.map(item => {\r\n          return (\r\n            <Flex\r\n              hAlign=\"center\"\r\n              vAlign=\"center\"\r\n              styles={{\r\n                maxWidth: \"150px\",\r\n                marginBottom: \"24px\"\r\n              }}\r\n              column\r\n              key={item.id}\r\n            >\r\n              <Link to={`/post?id=${item.id}`}>\r\n                <Image\r\n                  src={getSuo(item.content!)}\r\n                  styles={{\r\n                    width: \"100%\",\r\n                    height: \"auto\"\r\n                  }}\r\n                />\r\n              </Link>\r\n              <span>{item.title}</span>\r\n            </Flex>\r\n          );\r\n        })}\r\n    </Flex>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { list as postList, Post } from \"services/post\";\r\nimport Overview from \"./Overview\";\r\n\r\nexport default () => {\r\n  const [posts, setPosts] = useState<Post[]>([]);\r\n  useEffect(() => {\r\n    postList(\"\", \"推荐\", 1, 10).then(res => {\r\n      setPosts(res.posts);\r\n    });\r\n  }, []);\r\n  return (\r\n    <>\r\n      <h1>编辑推荐</h1>\r\n      <Overview posts={posts} />\r\n    </>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { ranking as getRanking, Post } from \"services/post\";\r\nimport Overview from \"./Overview\";\r\n\r\nexport default () => {\r\n  const [posts, setPosts] = useState<Post[]>([]);\r\n  useEffect(() => {\r\n    getRanking().then(res => {\r\n      setPosts(res.posts);\r\n    });\r\n  }, []);\r\n  return (\r\n    <>\r\n      <h1>排行榜</h1>\r\n      <Overview posts={posts} />\r\n    </>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Image, Flex, Menu } from \"@fluentui/react\";\r\nimport { getSuo } from \"services/dirty\";\r\nimport { list as getPostList, Post } from \"services/post\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default () => {\r\n  const [posts, setPosts] = useState<Record<string, Post[]>>({});\r\n  const [day, setDay] = useState(new Date().getDay());\r\n  useEffect(() => {\r\n    getPostList(\"新番\", \"\", 1, 100, \"nowait\").then(res => {\r\n      let ret: Record<string, Post[]> = {};\r\n      res.posts.forEach(item => {\r\n        let day = new Date(item.time?.split(\" \")[0]!).getDay();\r\n        ret[day.toString()] = ret[day.toString()] || [];\r\n        ret[day.toString()].push(item);\r\n      });\r\n      setPosts(ret);\r\n    });\r\n  }, []);\r\n  return (\r\n    <Flex column>\r\n      <h1>更新表</h1>\r\n      <Menu\r\n        defaultActiveIndex={day}\r\n        primary\r\n        items={[\r\n          { key: 0, content: \"周日\" },\r\n          { key: 1, content: \"周一\" },\r\n          { key: 2, content: \"周二\" },\r\n          { key: 3, content: \"周三\" },\r\n          { key: 4, content: \"周四\" },\r\n          { key: 5, content: \"周五\" },\r\n          { key: 6, content: \"周六\" }\r\n        ]}\r\n        onItemClick={(_, item) => {\r\n          setDay(item?.index!);\r\n          console.log(item);\r\n          console.log(posts);\r\n        }}\r\n      />\r\n      <Flex\r\n        wrap\r\n        gap=\"gap.medium\"\r\n        styles={{\r\n          paddingBottom: \"64px\"\r\n        }}\r\n      >\r\n        {posts[day]?.map(item => (\r\n          <Flex\r\n            column\r\n            key={item.id}\r\n            hAlign=\"center\"\r\n            styles={{\r\n              width: \"64px\"\r\n            }}\r\n          >\r\n            <Link to={`/post?id=${item.id}`}>\r\n              <Image\r\n                src={getSuo(item.content!)}\r\n                circular\r\n                styles={{\r\n                  width: \"100%\",\r\n                  height: \"64px\",\r\n                  marginTop: \"12px\"\r\n                }}\r\n              />\r\n            </Link>\r\n            <span\r\n              style={{\r\n                fontSize: \"8px\"\r\n              }}\r\n            >\r\n              {item.title}\r\n            </span>\r\n          </Flex>\r\n        ))}\r\n      </Flex>\r\n    </Flex>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Recommend from \"components/Recommend\";\r\nimport Ranking from \"components/Ranking\";\r\nimport Calendar from \"components/Calendar\";\r\n\r\nexport default () => (\r\n  <main\r\n    style={{\r\n      padding: \"8px\"\r\n    }}\r\n  >\r\n    <Recommend />\r\n    <Ranking />\r\n    <Calendar />\r\n  </main>\r\n);\r\n","import md5 from \"blueimp-md5\";\r\nimport { domain } from \"config\";\r\nimport cookie from \"js-cookie\";\r\n\r\nexport interface User {\r\n  id?: number;\r\n  name?: string;\r\n  qq?: string;\r\n  desc?: string;\r\n  level?: number;\r\n  pwd?: string;\r\n}\r\n\r\nexport interface UserLoginDTO extends User {\r\n  name: string;\r\n  pwd: string;\r\n}\r\n\r\nexport let user: User | undefined = cookie.getJSON(\"user\");\r\nexport let token = cookie.get(\"token\");\r\n\r\nfunction clearCache() {\r\n  user = undefined;\r\n  token = undefined;\r\n  cookie.remove(\"user\");\r\n  cookie.remove(\"token\");\r\n}\r\n\r\nexport function avatar(qq?: string) {\r\n  if (!qq) {\r\n    return \"./default_avatar.jpg\";\r\n  }\r\n  if (/^[0-9]+$/.test(qq)) {\r\n    return `http://q1.qlogo.cn/g?b=qq&nk=${qq}&s=5`;\r\n  } else {\r\n    let hash = md5(qq);\r\n    return `https://cdn.v2ex.com/gravatar/${hash}`;\r\n  }\r\n}\r\n\r\nexport async function login(u: UserLoginDTO) {\r\n  const resp = await fetch(`${domain.admin}/user/login`, {\r\n    method: \"POST\",\r\n    body: JSON.stringify(u)\r\n  });\r\n\r\n  const body: { code: number; token: string; user: User } = await resp.json();\r\n  if (body.code === 200) {\r\n    user = body.user;\r\n    token = body.token;\r\n    cookie.set(\"user\", user);\r\n    cookie.set(\"token\", token);\r\n\r\n    return true;\r\n  }\r\n  clearCache();\r\n}\r\n\r\nexport async function isLogin() {\r\n  if (!token) return false;\r\n\r\n  const resp = await fetch(`${domain.admin}/auth`, { credentials: \"include\" });\r\n  const body: { code: number; msg: string; user: User } = await resp.json();\r\n  if (body.code === 200) return true;\r\n  clearCache();\r\n  return false;\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Form,\r\n  ICSSInJSStyle,\r\n  FormFieldProps,\r\n  ShorthandCollection,\r\n  Input\r\n} from \"@fluentui/react\";\r\nimport { login } from \"services/user\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst fields: ShorthandCollection<FormFieldProps> = [\r\n  {\r\n    label: \"用户名\",\r\n    key: \"username\",\r\n    styles: {\r\n      marginBottom: \"16px\"\r\n    },\r\n    id: \"login_username\",\r\n    required: true\r\n  },\r\n  {\r\n    label: \"密码\",\r\n    key: \"password\",\r\n    styles: {\r\n      marginBottom: \"16px\"\r\n    },\r\n    id: \"login_password\",\r\n    required: true,\r\n    control: {\r\n      as: Input,\r\n      type: \"password\"\r\n    }\r\n  },\r\n  {\r\n    control: {\r\n      as: Button,\r\n      content: \"登录\"\r\n    },\r\n    key: \"login\"\r\n  }\r\n];\r\n\r\nconst styles: ICSSInJSStyle = {\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  marginTop: \"33%\"\r\n};\r\n\r\nexport default () => {\r\n  const history = useHistory();\r\n  return (\r\n    <Form\r\n      onSubmit={async () => {\r\n        const name = (document.getElementById(\r\n          \"login_username\"\r\n        ) as HTMLInputElement).value;\r\n        const pwd = (document.getElementById(\r\n          \"login_password\"\r\n        ) as HTMLInputElement).value;\r\n\r\n        if (await login({ name, pwd })) {\r\n          history.goBack();\r\n        } else {\r\n          alert(\"用户名或密码错误\");\r\n        }\r\n      }}\r\n      fields={fields}\r\n      styles={styles}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nexport function useMediaQuery(query: string) {\r\n  const [match, setMatch] = React.useState(() => matchMedia(query).matches);\r\n\r\n  React.useEffect(() => {\r\n    let active = true;\r\n\r\n    const queryList = matchMedia(query);\r\n    const updateMatch = () => {\r\n      if (active) {\r\n        setMatch(queryList.matches);\r\n      }\r\n    };\r\n    updateMatch();\r\n    queryList.addListener(updateMatch);\r\n    return () => {\r\n      active = false;\r\n      queryList.removeListener(updateMatch);\r\n    };\r\n  }, [query]);\r\n\r\n  return match;\r\n}\r\n\r\nexport function useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nexport function disableScreenScale() {\r\n  let lastTime = 0;\r\n  document.addEventListener(\"touchstart\", evt => {\r\n    if (evt.touches.length > 1) {\r\n      evt.preventDefault();\r\n    }\r\n  });\r\n  document.addEventListener(\r\n    \"touchend\",\r\n    evt => {\r\n      const nowTime = new Date().getTime();\r\n      if (nowTime - lastTime <= 300) {\r\n        evt.preventDefault();\r\n      }\r\n      lastTime = nowTime;\r\n    },\r\n    false\r\n  );\r\n}\r\n","import { domain } from \"config\";\r\n\r\nexport interface Video {\r\n  id?: number;\r\n  content?: string;\r\n  uqq?: string;\r\n  oid?: number;\r\n  title?: string;\r\n}\r\n\r\nexport async function pv(id: string) {\r\n  const resp = await fetch(`${domain.jx}/get/pv?pid=${id}`);\r\n  const body = await resp.json();\r\n  return body.pv;\r\n}\r\n\r\nexport async function list(id: string) {\r\n  const resp = await fetch(\r\n    `${domain.api}/videos?pid=${id}&page=1&pageSize=150`\r\n  );\r\n  const body = await resp.json();\r\n  return body.videos;\r\n}\r\n\r\nexport async function play(url: string) {\r\n  const resp = await fetch(`${domain.jx}/jx?url=${url}`);\r\n  const body = await resp.json();\r\n  return body;\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Video, Flex } from \"@fluentui/react\";\r\nimport { useQuery } from \"utils\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { avatar } from \"services/user\";\r\nimport { list as getVideoList, Video as IVideo } from \"services/video\";\r\nimport \"./VideoList.css\";\r\n\r\nexport function VideoList(props: { postId: string }) {\r\n  const [videos, setVideoList] = useState<IVideo[]>([]);\r\n  useEffect(() => {\r\n    (async () => {\r\n      const videoList = await getVideoList(props.postId);\r\n      setVideoList(videoList);\r\n    })();\r\n  }, [props.postId]);\r\n\r\n  return (\r\n    <div className=\"video-list\">\r\n      {videos?.map(item => {\r\n        return (\r\n          <Link\r\n            to={`/video?url=${item.content}`}\r\n            className=\"item\"\r\n            key={item.id}\r\n          >\r\n            <img src={avatar(item.uqq)} alt={item.uqq}></img>\r\n            <span>P {item.oid}</span>\r\n            <span>{item.title}</span>\r\n          </Link>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default () => {\r\n  const query = useQuery();\r\n  return (\r\n    <Flex\r\n      styles={{\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\"\r\n      }}\r\n    >\r\n      <Video\r\n        src={query.get(\"url\")!}\r\n        autoPlay\r\n        styles={{\r\n          width: \"100%\",\r\n          height: \"auto\"\r\n        }}\r\n      />\r\n    </Flex>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { Flex } from \"@fluentui/react\";\r\n// @ts-ignore\r\nimport snarkdown from \"snarkdown\";\r\nimport { details as getPostDetails, Post } from \"services/post\";\r\nimport \"./Post.css\";\r\nimport { useQuery } from \"utils\";\r\nimport { VideoList } from \"./Video\";\r\n\r\nexport default () => {\r\n  const id = useQuery().get(\"id\")!;\r\n  const t: any = useRef(null);\r\n  const u: any = useRef(null);\r\n  const [post, setPost] = useState<Post>({});\r\n  useEffect(() => {\r\n    (async () => {\r\n      const details = await getPostDetails(id);\r\n      setPost(details);\r\n      const w = document.body.clientWidth;\r\n      if (details.tag.indexOf(\"其它\") > -1 || w < 480) {\r\n        t.current.style.display = \"none\";\r\n        u.current.style.display = \"block\";\r\n        u.current.innerHTML = snarkdown(details.content);\r\n      } else {\r\n        t.current.innerHTML = snarkdown(details.content);\r\n      }\r\n    })();\r\n  }, [id]);\r\n  return (\r\n    <Flex column>\r\n      <article ref={t}></article>\r\n      <h1>{post.title || \"少男祈祷中……\"}</h1>\r\n      <article ref={u} className=\"other\"></article>\r\n      {post.status === \"public\" ? (\r\n        <VideoList postId={id} />\r\n      ) : post.status ? (\r\n        <div className=\"copyright\">版权原因，该番剧未上架，请支持正版</div>\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </Flex>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Post, search as getSearchList } from \"services/post\";\r\nimport Overview from \"components/Overview\";\r\nimport { useQuery } from \"utils\";\r\n\r\nexport default () => {\r\n  const key = useQuery().get(\"key\")!;\r\n  const [posts, setPosts] = useState<Post[]>([]);\r\n  useEffect(() => {\r\n    getSearchList(key).then(res => {\r\n      setPosts(res.posts);\r\n    });\r\n  }, [key]);\r\n  return <Overview posts={posts} />;\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Input, Avatar, ICSSInJSStyle, Flex } from \"@fluentui/react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { avatar, isLogin, user } from \"services/user\";\r\n\r\nexport default () => {\r\n  const history = useHistory();\r\n  const [data, setData] = useState({ isLogin: true });\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setData({\r\n        isLogin: await isLogin()\r\n      });\r\n    })();\r\n  }, []);\r\n  return (\r\n    <Flex styles={headerStyle}>\r\n      <Link to={data.isLogin ? \"/\" : \"/login\"}>\r\n        <Avatar size=\"larger\" image={avatar(user?.qq)} />\r\n      </Link>\r\n      <Flex styles={searchStyle}>\r\n        <Input\r\n          fluid\r\n          icon=\"search\"\r\n          onKeyPress={evt => {\r\n            if (evt.key === \"Enter\") {\r\n              history.push(`/search?key=${evt.currentTarget.value}`);\r\n            }\r\n          }}\r\n        />\r\n      </Flex>\r\n    </Flex>\r\n  );\r\n};\r\n\r\nconst headerStyle: ICSSInJSStyle = {\r\n  padding: \"4px 8px\",\r\n  alignItems: \"center\"\r\n};\r\n\r\nconst searchStyle: ICSSInJSStyle = {\r\n  flexGrow: 1,\r\n  margin: \"0 8px 0 12px\"\r\n};\r\n","import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport { HomePage, LoginPage, PostPage, VideoPage, SearchPage } from \"pages\";\nimport Header from \"components/Header\";\n\nexport default () => {\n  return (\n    <Router>\n      <Header />\n      <Switch>\n        <Route path=\"/search\">\n          <SearchPage />\n        </Route>\n        <Route path=\"/video\">\n          <VideoPage />\n        </Route>\n        <Route path=\"/post\">\n          <PostPage />\n        </Route>\n        <Route path=\"/login\">\n          <LoginPage />\n        </Route>\n        <Route path=\"/\">\n          <HomePage />\n        </Route>\n      </Switch>\n    </Router>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider, themes } from \"@fluentui/react\";\n// import {} from \"history\";\nimport * as serviceWorker from \"serviceWorker\";\nimport \"index.css\";\nimport App from \"App\";\nimport { useMediaQuery, disableScreenScale } from \"utils\";\n\ndisableScreenScale();\n\nfunction Index() {\n  const darkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n  const theme = React.useMemo(\n    () => (darkMode ? themes.teamsDark : themes.teams),\n    [darkMode]\n  );\n  return (\n    <Provider theme={theme}>\n      <App />\n    </Provider>\n  );\n}\n\nReactDOM.render(<Index />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}