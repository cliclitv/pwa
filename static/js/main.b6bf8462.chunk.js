(this["webpackJsonpclicli-pwa"]=this["webpackJsonpclicli-pwa"]||[]).push([[0],{337:function(e,t,n){e.exports=n(482)},342:function(e,t,n){},451:function(e,t,n){},465:function(e,t,n){},466:function(e,t,n){},482:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(62),o=n.n(c),u=n(65),s=n(165);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(342);var i=n(93),l=n(144),m=n.n(l),p=n(26),f=n(27),d=n.n(f),h=n(36),v="https://admin.clicli.me",E="https://api.clicli.us";function g(e,t,n,a){return b.apply(this,arguments)}function b(){return(b=Object(h.a)(d.a.mark((function e(t,n,a,r){var c,o,u,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.length>4&&void 0!==s[4]?s[4]:"public",o=s.length>5&&void 0!==s[5]?s[5]:"",e.next=4,fetch("".concat(E,"/posts?status=").concat(c,"&sort=").concat(t,"&tag=").concat(n,"&uid=").concat(o,"&page=").concat(a,"&pageSize=").concat(r));case 4:return u=e.sent,e.abrupt("return",u.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return x.apply(this,arguments)}function x(){return(x=Object(h.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/post/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.result);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/rank"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/search/posts?key=").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=n(146),O=n(162),S=n(48),L=n(47);function I(e){var t=e.match(/suo(.+?)\)/i);return t?t[1].slice(2):"https://wx4.sinaimg.cn/mw690/0060lm7Tly1fvmtrka9p5j30b40b43yo.jpg"}var q,B,D,T,M=function(e){var t=e.posts;return r.a.createElement(w.a,{styles:{alignItems:"flex-start"},columns:Math.floor(document.body.clientWidth/182),content:null===t||void 0===t?void 0:t.map((function(e){return r.a.createElement(O.a,{hAlign:"center",vAlign:"center",styles:{padding:"12px ".concat(16,"px")},column:!0,key:e.id},r.a.createElement(L.Link,{to:"/post?id=".concat(e.id)},r.a.createElement(S.a,{src:I(e.content),styles:{width:"100%",height:"210px",marginBottom:"8px"}})),r.a.createElement("span",null,e.title))}))})},F=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){q?c(q):g("","\u63a8\u8350",1,10).then((function(e){q=e.posts,c(q)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u7f16\u8f91\u63a8\u8350"),r.a.createElement(M,{posts:n}))},N=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){B?c(B):function(){return j.apply(this,arguments)}().then((function(e){B=e.posts,c(B)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u6392\u884c\u699c"),r.a.createElement(M,{posts:n}))},_=n(84),A=(n(451),function(){var e,t=Object(a.useState)({}),n=Object(p.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)((new Date).getDay()),s=Object(p.a)(u,2),i=s[0],l=s[1];return Object(a.useEffect)((function(){D?o(D):g("\u65b0\u756a","",1,100,"nowait").then((function(e){var t={};e.posts.forEach((function(e){var n,a=new Date(null===(n=e.time)||void 0===n?void 0:n.split(" ")[0]).getDay();t[a.toString()]=t[a.toString()]||[],t[a.toString()].push(e)})),o(D=t)}))}),[]),r.a.createElement(O.a,{column:!0},r.a.createElement("h1",null,"\u8ffd\u756a\u65f6\u95f4\u8868"),r.a.createElement(_.a,{className:"date_list",defaultActiveIndex:i,primary:!0,items:[{key:0,content:"\u5468\u65e5"},{key:1,content:"\u5468\u4e00"},{key:2,content:"\u5468\u4e8c"},{key:3,content:"\u5468\u4e09"},{key:4,content:"\u5468\u56db"},{key:5,content:"\u5468\u4e94"},{key:6,content:"\u5468\u516d"}],onItemClick:function(e,t){l(null===t||void 0===t?void 0:t.index)}}),r.a.createElement(w.a,{styles:{alignItems:"flex-start"},content:null===(e=c[i])||void 0===e?void 0:e.map((function(e){return r.a.createElement(O.a,{column:!0,key:e.id,hAlign:"center",vAlign:"center"},r.a.createElement(L.Link,{to:"/post?id=".concat(e.id)},r.a.createElement(S.a,{src:I(e.content),circular:!0,styles:{maxWidth:"128px",width:"18vw",height:"18vw",maxHeight:"128px",margin:"12px 0 8px 0"}})),r.a.createElement("span",null,e.title))}))}))}),H=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){T?c(T):g("\u539f\u521b","",2,4).then((function(e){T=e.posts,c(T)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u4e2a\u4eba\u6295\u7a3f"),r.a.createElement(M,{posts:n}))},P=function(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){g("bgm","",1,30).then((function(e){c(e.posts)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u6700\u8fd1\u66f4\u65b0"),r.a.createElement(M,{posts:n}))},J=function(){return r.a.createElement("main",{style:{padding:"8px"}},r.a.createElement(F,null),r.a.createElement(N,null),r.a.createElement(A,null),r.a.createElement(H,null),r.a.createElement(P,null))},W=n(85),z=n(61),C=n(163),R=n(312),$=n.n(R),G=n(108),K=n.n(G),U=K.a.getJSON("user"),Q=K.a.get("token");function V(){U=void 0,Q=void 0,K.a.remove("user"),K.a.remove("token")}function X(e){if(!e)return"./default_avatar.jpg";if(/^[0-9]+$/.test(e))return"http://q1.qlogo.cn/g?b=qq&nk=".concat(e,"&s=5");var t=$()(e);return"https://cdn.v2ex.com/gravatar/".concat(t)}function Y(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(h.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/user/login"),{method:"POST",body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:if(200!==(a=e.sent).code){e.next=12;break}return U=a.user,Q=a.token,K.a.set("user",U),K.a.set("token",Q),e.abrupt("return",!0);case 12:V();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return te.apply(this,arguments)}function te(){return(te=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=[{label:"\u7528\u6237\u540d",key:"username",styles:{marginBottom:"16px"},id:"login_username",required:!0},{label:"\u5bc6\u7801",key:"password",styles:{marginBottom:"16px"},id:"login_password",required:!0,control:{as:W.a,type:"password"}},{control:{as:z.a,content:"\u767b\u5f55"},key:"login"}],ae={display:"flex",flexDirection:"column",alignItems:"center",marginTop:"33%"},re=function(){var e=Object(i.k)();return r.a.createElement(C.a,{onSubmit:Object(h.a)(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.getElementById("login_username").value,a=document.getElementById("login_password").value,t.next=4,Y({name:n,pwd:a});case 4:if(!t.sent){t.next=8;break}e.goBack(),t.next=9;break;case 8:alert("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef");case 9:case"end":return t.stop()}}),t)}))),fields:ne,styles:ae})},ce=n(314);n(465);function oe(){return new URLSearchParams(Object(i.l)().search)}var ue=n(114);function se(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(h.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(E,"/videos?pid=").concat(t,"&page=1&pageSize=150"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.videos);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(466);function le(e){var t=Object(a.useState)([]),n=Object(p.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){Object(h.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se(e.postId);case 2:n=t.sent,o(n);case 4:case"end":return t.stop()}}),t)})))()}),[e.postId]),r.a.createElement("div",{className:"video-list"},null===c||void 0===c?void 0:c.map((function(e){return r.a.createElement(L.Link,{to:"/video?url=".concat(e.content),className:"item",key:e.id},r.a.createElement("img",{src:X(e.uqq),alt:e.uqq}),r.a.createElement("span",null,"P ",e.oid),r.a.createElement("span",null,e.title))})))}var me,pe=function(){var e=oe();return r.a.createElement(O.a,{styles:{justifyContent:"center",alignItems:"center"}},r.a.createElement(ue.a,{src:e.get("url"),autoPlay:!0,styles:{width:"100%",height:"auto"}}))},fe={id:"",post:{},HTML:""},de=function(){var e=oe().get("id");if(!e)return r.a.createElement(r.a.Fragment,null);var t=Object(a.useRef)(null),n=Object(a.useState)({}),c=Object(p.a)(n,2),o=c[0],u=c[1];return Object(a.useEffect)((function(){Object(h.a)(d.a.mark((function n(){var a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((a=fe.post).id===e){n.next=8;break}return n.next=4,y(e);case 4:a=n.sent,fe.post=a,fe.id=e,fe.HTML=Object(ce.a)(a.content);case 8:u(a),t.current.innerHTML=fe.HTML;case 10:case"end":return n.stop()}}),n)})))()}),[e]),r.a.createElement(O.a,{column:!0},r.a.createElement("h1",null,o.title||"\u5c11\u7537\u7948\u7977\u4e2d\u2026\u2026"),r.a.createElement("article",{ref:t}),"public"===o.status?r.a.createElement(le,{postId:e}):o.status?r.a.createElement("div",{className:"copyright"},"\u7248\u6743\u539f\u56e0\uff0c\u8be5\u756a\u5267\u672a\u4e0a\u67b6\uff0c\u8bf7\u652f\u6301\u6b63\u7248"):r.a.createElement(r.a.Fragment,null))},he=function(){var e=oe().get("key"),t=Object(a.useState)([]),n=Object(p.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){me?o(me):function(e){return k.apply(this,arguments)}(e).then((function(e){me=e.posts,o(me)}))}),[e]),r.a.createElement(M,{posts:c})},ve=n(164),Ee=function(){var e=Object(i.k)(),t=Object(a.useState)({isLogin:!0}),n=Object(p.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,ee();case 3:e.t1=e.sent,e.t2={isLogin:e.t1},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)})))()}),[]),r.a.createElement(O.a,{styles:ge},r.a.createElement(L.Link,{to:c.isLogin?"/":"/login"},r.a.createElement(ve.a,{size:"larger",image:X(null===U||void 0===U?void 0:U.qq)})),r.a.createElement(O.a,{styles:be},r.a.createElement(W.a,{fluid:!0,icon:"search",onKeyPress:function(t){"Enter"===t.key&&e.push("/search?key=".concat(t.currentTarget.value))}})))},ge={padding:"4px 8px",alignItems:"center",marginBottom:"24px"},be={flexGrow:1,margin:"0 8px 0 12px"},ye=function(){return r.a.createElement(O.a,{styles:{height:"48px"}})},xe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,null),r.a.createElement(l.CacheSwitch,null,r.a.createElement(m.a,{path:"/search"},r.a.createElement(he,null)),r.a.createElement(i.d,{path:"/video"},r.a.createElement(pe,null)),r.a.createElement(m.a,{path:"/post"},r.a.createElement(de,null)),r.a.createElement(i.d,{path:"/login"},r.a.createElement(re,null)),r.a.createElement(m.a,{path:"/"},r.a.createElement(J,null))),r.a.createElement(ye,null))};!function(){var e=0;document.addEventListener("touchstart",(function(e){e.touches.length>1&&e.preventDefault()}),{passive:!1}),document.addEventListener("touchend",(function(t){var n=(new Date).getTime();n-e<=300&&t.preventDefault(),e=n}),{passive:!1})}(),o.a.render(r.a.createElement((function(){var e=function(e){var t=r.a.useState((function(){return matchMedia(e).matches})),n=Object(p.a)(t,2),a=n[0],c=n[1];return r.a.useEffect((function(){var t=!0,n=matchMedia(e),a=function(){t&&c(n.matches)};return a(),n.addListener(a),function(){t=!1,n.removeListener(a)}}),[e]),a}("(prefers-color-scheme: dark)"),t=r.a.useMemo((function(){return e?u.themes.teamsDark:u.themes.teams}),[e]);return r.a.createElement(s.a,{theme:t},r.a.createElement(L.BrowserRouter,null,r.a.createElement(xe,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[337,1,2]]]);
//# sourceMappingURL=main.b6bf8462.chunk.js.map