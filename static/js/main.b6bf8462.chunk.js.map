{"version":3,"sources":["serviceWorker.ts","config.ts","services/post.ts","services/dirty.ts","components/Overview.tsx","components/Recommend.tsx","components/Ranking.tsx","components/Calendar.tsx","components/UGC.tsx","components/Latest.tsx","pages/Home.tsx","services/user.ts","pages/Login.tsx","utils.ts","services/video.ts","pages/Video.tsx","pages/Search.tsx","pages/Post.tsx","components/Header.tsx","components/Footer.tsx","App.tsx","index.tsx"],"names":["Boolean","window","location","hostname","match","domain","list","type","tag","page","pageSize","a","status","uid","fetch","resp","json","details","id","body","result","key","getSuo","content","m","slice","postsCache","props","posts","Grid","styles","alignItems","columns","Math","floor","document","clientWidth","map","item","Flex","hAlign","vAlign","padding","column","to","Image","src","width","height","marginBottom","title","useState","setPosts","useEffect","getPostList","then","res","Overview","getRanking","Date","getDay","day","setDay","ret","forEach","time","split","toString","push","Menu","className","defaultActiveIndex","primary","items","onItemClick","_","index","circular","maxWidth","maxHeight","margin","style","Recommend","Ranking","Latest","user","cookie","getJSON","token","get","clearCache","undefined","remove","avatar","qq","test","hash","md5","login","u","method","JSON","stringify","code","set","isLogin","fields","label","required","control","as","Input","Button","display","flexDirection","marginTop","history","useHistory","Form","onSubmit","name","getElementById","value","pwd","goBack","alert","useQuery","URLSearchParams","useLocation","search","videos","VideoList","setVideoList","getVideoList","postId","videoList","uqq","alt","oid","query","justifyContent","Video","autoPlay","cache","post","HTML","useRef","setPost","getPostDetails","snarkdown","current","innerHTML","ref","getSearchList","data","setData","headerStyle","Avatar","size","image","searchStyle","fluid","icon","onKeyPress","evt","currentTarget","flexGrow","Header","path","Search","Login","Home","Footer","lastTime","addEventListener","touches","length","preventDefault","passive","nowTime","getTime","disableScreenScale","ReactDOM","render","darkMode","React","matchMedia","matches","setMatch","active","queryList","updateMatch","addListener","removeListener","useMediaQuery","theme","useMemo","themes","teamsDark","teams","Provider","App","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.b6bf8462.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","export const domain = {\n  admin: \"https://admin.clicli.me\",\n  home: \"https://www.clicli.me\",\n  api: \"https://api.clicli.us\",\n  jx: \"https://jx.clicli.us\"\n};\n","import { domain } from \"config\";\n\nexport interface Post {\n  id?: string;\n  content?: string;\n  uqq?: string;\n  uname?: string;\n  uid?: number;\n  title?: string;\n  tag?: string;\n  time?: string;\n  status?: string;\n}\n\nexport async function list(\n  type: string,\n  tag: string,\n  page: number,\n  pageSize: number,\n  status = \"public\",\n  uid = \"\"\n): Promise<{ posts: Post[] }> {\n  const resp = await fetch(\n    `${domain.api}/posts?status=${status}&sort=${type}&tag=${tag}&uid=${uid}&page=${page}&pageSize=${pageSize}`\n  );\n\n  return resp.json();\n}\n\nexport async function details(id: string) {\n  const resp = await fetch(`${domain.api}/post/${id}`);\n  const body = await resp.json();\n  return body.result;\n}\n\nexport async function ranking(): Promise<{ posts: Post[] }> {\n  const resp = await fetch(`${domain.api}/rank`);\n  return resp.json();\n}\n\nexport async function search(key: string): Promise<{ posts: Post[] }> {\n  const resp = await fetch(`${domain.api}/search/posts?key=${key}`);\n  return resp.json();\n}\n","export function getSuo(content: string) {\n  let m = content.match(/suo(.+?)\\)/i);\n  return m\n    ? m[1].slice(2)\n    : \"https://wx4.sinaimg.cn/mw690/0060lm7Tly1fvmtrka9p5j30b40b43yo.jpg\";\n}\n","import { Flex, Image, Grid } from \"@fluentui/react\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { getSuo } from \"services/dirty\";\nimport { Post } from \"services/post\";\n\nexport default (props: { posts: Post[] }) => {\n  const posts = props.posts;\n  const coverWidth = 150,\n    coverPadding = 16;\n  return (\n    <Grid\n      styles={{\n        alignItems: \"flex-start\"\n      }}\n      columns={Math.floor(\n        document.body.clientWidth / (coverWidth + coverPadding * 2)\n      )}\n      content={posts?.map(item => {\n        return (\n          <Flex\n            hAlign=\"center\"\n            vAlign=\"center\"\n            styles={{\n              padding: `12px ${coverPadding}px`\n            }}\n            column\n            key={item.id}\n          >\n            <Link to={`/post?id=${item.id}`}>\n              <Image\n                src={getSuo(item.content!)}\n                styles={{\n                  width: \"100%\",\n                  height: \"210px\",\n                  marginBottom: \"8px\"\n                }}\n              />\n            </Link>\n            <span>{item.title}</span>\n          </Flex>\n        );\n      })}\n    />\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { list as getPostList, Post } from \"services/post\";\nimport Overview from \"./Overview\";\n\nlet postsCache: Post[] | undefined;\n\nexport default () => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  useEffect(() => {\n    if (postsCache) {\n      setPosts(postsCache);\n      return;\n    }\n    getPostList(\"\", \"推荐\", 1, 10).then(res => {\n      postsCache = res.posts;\n      setPosts(postsCache);\n    });\n  }, []);\n  return (\n    <>\n      <h1>编辑推荐</h1>\n      <Overview posts={posts} />\n    </>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { ranking as getRanking, Post } from \"services/post\";\nimport Overview from \"./Overview\";\n\nlet postsCache: Post[] | undefined;\n\nexport default () => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  useEffect(() => {\n    if (postsCache) {\n      setPosts(postsCache);\n      return;\n    }\n    getRanking().then(res => {\n      postsCache = res.posts;\n      setPosts(postsCache);\n    });\n  }, []);\n  return (\n    <>\n      <h1>排行榜</h1>\n      <Overview posts={posts} />\n    </>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Image, Flex, Menu, Grid } from \"@fluentui/react\";\nimport { getSuo } from \"services/dirty\";\nimport { list as getPostList, Post } from \"services/post\";\nimport { Link } from \"react-router-dom\";\nimport \"./Calendar.css\";\n\nlet postsCache: Record<string, Post[]> | undefined;\n\nexport default () => {\n  const [posts, setPosts] = useState<Record<string, Post[]>>({});\n  const [day, setDay] = useState(new Date().getDay());\n  useEffect(() => {\n    if (postsCache) {\n      setPosts(postsCache);\n      return;\n    }\n    getPostList(\"新番\", \"\", 1, 100, \"nowait\").then(res => {\n      let ret: Record<string, Post[]> = {};\n      res.posts.forEach(item => {\n        let day = new Date(item.time?.split(\" \")[0]!).getDay();\n        ret[day.toString()] = ret[day.toString()] || [];\n        ret[day.toString()].push(item);\n      });\n      postsCache = ret;\n      setPosts(postsCache);\n    });\n  }, []);\n  return (\n    <Flex column>\n      <h1>追番时间表</h1>\n      <Menu\n        className=\"date_list\"\n        defaultActiveIndex={day}\n        primary\n        items={[\n          { key: 0, content: \"周日\" },\n          { key: 1, content: \"周一\" },\n          { key: 2, content: \"周二\" },\n          { key: 3, content: \"周三\" },\n          { key: 4, content: \"周四\" },\n          { key: 5, content: \"周五\" },\n          { key: 6, content: \"周六\" }\n        ]}\n        onItemClick={(_, item) => {\n          setDay(item?.index!);\n        }}\n      />\n      <Grid\n        styles={{\n          alignItems: \"flex-start\"\n        }}\n        content={posts[day]?.map(item => (\n          <Flex column key={item.id} hAlign=\"center\" vAlign=\"center\">\n            <Link to={`/post?id=${item.id}`}>\n              <Image\n                src={getSuo(item.content!)}\n                circular\n                styles={{\n                  maxWidth: \"128px\",\n                  width: \"18vw\",\n                  height: \"18vw\",\n                  maxHeight: \"128px\",\n                  margin: \"12px 0 8px 0\"\n                }}\n              />\n            </Link>\n            <span>{item.title}</span>\n          </Flex>\n        ))}\n      />\n    </Flex>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { list as getPostList, Post } from \"services/post\";\nimport Overview from \"./Overview\";\n\nlet postsCache: Post[] | undefined;\n\nexport default () => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  useEffect(() => {\n    if (postsCache) {\n      setPosts(postsCache);\n      return;\n    }\n    getPostList(\"原创\", \"\", 2, 4).then(res => {\n      postsCache = res.posts;\n      setPosts(postsCache);\n    });\n  }, []);\n  return (\n    <>\n      <h1>个人投稿</h1>\n      <Overview posts={posts} />\n    </>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { list as getPostList, Post } from \"services/post\";\nimport Overview from \"./Overview\";\n\nexport default () => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  useEffect(() => {\n    getPostList(\"bgm\", \"\", 1, 30).then(res => {\n      setPosts(res.posts);\n    });\n  }, []);\n  return (\n    <>\n      <h1>最近更新</h1>\n      <Overview posts={posts} />\n    </>\n  );\n};\n","import React from \"react\";\nimport Recommend from \"components/Recommend\";\nimport Ranking from \"components/Ranking\";\nimport Calendar from \"components/Calendar\";\nimport UCG from \"components/UGC\";\nimport Latest from \"components/Latest\";\n\nexport default () => (\n  <main\n    style={{\n      padding: \"8px\"\n    }}\n  >\n    <Recommend />\n    <Ranking />\n    <Calendar />\n    <UCG />\n    <Latest />\n  </main>\n);\n","import md5 from \"blueimp-md5\";\nimport { domain } from \"config\";\nimport cookie from \"js-cookie\";\n\nexport interface User {\n  id?: number;\n  name?: string;\n  qq?: string;\n  desc?: string;\n  level?: number;\n  pwd?: string;\n}\n\nexport interface UserLoginDTO extends User {\n  name: string;\n  pwd: string;\n}\n\nexport let user: User | undefined = cookie.getJSON(\"user\");\nexport let token = cookie.get(\"token\");\n\nfunction clearCache() {\n  user = undefined;\n  token = undefined;\n  cookie.remove(\"user\");\n  cookie.remove(\"token\");\n}\n\nexport function avatar(qq?: string) {\n  if (!qq) {\n    return \"./default_avatar.jpg\";\n  }\n  if (/^[0-9]+$/.test(qq)) {\n    return `http://q1.qlogo.cn/g?b=qq&nk=${qq}&s=5`;\n  } else {\n    let hash = md5(qq);\n    return `https://cdn.v2ex.com/gravatar/${hash}`;\n  }\n}\n\nexport async function login(u: UserLoginDTO) {\n  const resp = await fetch(`${domain.admin}/user/login`, {\n    method: \"POST\",\n    body: JSON.stringify(u)\n  });\n\n  const body: { code: number; token: string; user: User } = await resp.json();\n  if (body.code === 200) {\n    user = body.user;\n    token = body.token;\n    cookie.set(\"user\", user);\n    cookie.set(\"token\", token);\n\n    return true;\n  }\n  clearCache();\n}\n\nexport async function isLogin() {\n  if (!token) return false;\n\n  // const resp = await fetch(`${domain.admin}/auth`, { credentials: \"include\" });\n  // const body: { code: number; msg: string; user: User } = await resp.json();\n  // if (body.code === 200) return true;\n  // clearCache();\n  return true;\n}\n","import React from \"react\";\nimport {\n  Button,\n  Form,\n  ICSSInJSStyle,\n  FormFieldProps,\n  ShorthandCollection,\n  Input\n} from \"@fluentui/react\";\nimport { login } from \"services/user\";\nimport { useHistory } from \"react-router-dom\";\n\nconst fields: ShorthandCollection<FormFieldProps> = [\n  {\n    label: \"用户名\",\n    key: \"username\",\n    styles: {\n      marginBottom: \"16px\"\n    },\n    id: \"login_username\",\n    required: true\n  },\n  {\n    label: \"密码\",\n    key: \"password\",\n    styles: {\n      marginBottom: \"16px\"\n    },\n    id: \"login_password\",\n    required: true,\n    control: {\n      as: Input,\n      type: \"password\"\n    }\n  },\n  {\n    control: {\n      as: Button,\n      content: \"登录\"\n    },\n    key: \"login\"\n  }\n];\n\nconst styles: ICSSInJSStyle = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n  marginTop: \"33%\"\n};\n\nexport default () => {\n  const history = useHistory();\n  return (\n    <Form\n      onSubmit={async () => {\n        const name = (document.getElementById(\n          \"login_username\"\n        ) as HTMLInputElement).value;\n        const pwd = (document.getElementById(\n          \"login_password\"\n        ) as HTMLInputElement).value;\n\n        if (await login({ name, pwd })) {\n          history.goBack();\n        } else {\n          alert(\"用户名或密码错误\");\n        }\n      }}\n      fields={fields}\n      styles={styles}\n    />\n  );\n};\n","import React, { useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\nexport function useMediaQuery(query: string) {\n  const [match, setMatch] = React.useState(() => matchMedia(query).matches);\n\n  React.useEffect(() => {\n    let active = true;\n\n    const queryList = matchMedia(query);\n    const updateMatch = () => {\n      if (active) {\n        setMatch(queryList.matches);\n      }\n    };\n    updateMatch();\n    queryList.addListener(updateMatch);\n    return () => {\n      active = false;\n      queryList.removeListener(updateMatch);\n    };\n  }, [query]);\n\n  return match;\n}\n\nexport function useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nexport function disableScreenScale() {\n  let lastTime = 0;\n  document.addEventListener(\n    \"touchstart\",\n    evt => {\n      if (evt.touches.length > 1) {\n        evt.preventDefault();\n      }\n    },\n    { passive: false }\n  );\n  document.addEventListener(\n    \"touchend\",\n    evt => {\n      const nowTime = new Date().getTime();\n      if (nowTime - lastTime <= 300) {\n        evt.preventDefault();\n      }\n      lastTime = nowTime;\n    },\n    { passive: false }\n  );\n}\n\nexport function ScrollToTop() {\n  const { pathname } = useLocation();\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return null;\n}\n","import { domain } from \"config\";\n\nexport interface Video {\n  id?: number;\n  content?: string;\n  uqq?: string;\n  oid?: number;\n  title?: string;\n}\n\nexport async function pv(id: string) {\n  const resp = await fetch(`${domain.jx}/get/pv?pid=${id}`);\n  const body = await resp.json();\n  return body.pv;\n}\n\nexport async function list(id: string) {\n  const resp = await fetch(\n    `${domain.api}/videos?pid=${id}&page=1&pageSize=150`\n  );\n  const body = await resp.json();\n  return body.videos;\n}\n\nexport async function play(url: string) {\n  const resp = await fetch(`${domain.jx}/jx?url=${url}`);\n  const body = await resp.json();\n  return body;\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Video, Flex } from \"@fluentui/react\";\nimport { useQuery } from \"utils\";\nimport { Link } from \"react-router-dom\";\nimport { avatar } from \"services/user\";\nimport { list as getVideoList, Video as IVideo } from \"services/video\";\nimport \"./VideoList.css\";\n\nexport function VideoList(props: { postId: string }) {\n  const [videos, setVideoList] = useState<IVideo[]>([]);\n  useEffect(() => {\n    (async () => {\n      const videoList = await getVideoList(props.postId);\n      setVideoList(videoList);\n    })();\n  }, [props.postId]);\n\n  return (\n    <div className=\"video-list\">\n      {videos?.map(item => {\n        return (\n          <Link\n            to={`/video?url=${item.content}`}\n            className=\"item\"\n            key={item.id}\n          >\n            <img src={avatar(item.uqq)} alt={item.uqq}></img>\n            <span>P {item.oid}</span>\n            <span>{item.title}</span>\n          </Link>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default () => {\n  const query = useQuery();\n  return (\n    <Flex\n      styles={{\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      }}\n    >\n      <Video\n        src={query.get(\"url\")!}\n        autoPlay\n        styles={{\n          width: \"100%\",\n          height: \"auto\"\n        }}\n      />\n    </Flex>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Post, search as getSearchList } from \"services/post\";\nimport Overview from \"components/Overview\";\nimport { useQuery } from \"utils\";\n\nlet postsCache: Post[] | undefined;\n\nexport default () => {\n  const key = useQuery().get(\"key\")!;\n  const [posts, setPosts] = useState<Post[]>([]);\n  useEffect(() => {\n    if (postsCache) {\n      setPosts(postsCache);\n      return;\n    }\n    getSearchList(key).then(res => {\n      postsCache = res.posts;\n      setPosts(postsCache);\n    });\n  }, [key]);\n  return <Overview posts={posts} />;\n};\n","import React, { useEffect, useState, useRef } from \"react\";\nimport { Flex } from \"@fluentui/react\";\n// @ts-ignore\nimport snarkdown from \"snarkdown\";\nimport { details as getPostDetails, Post } from \"services/post\";\nimport \"./Post.css\";\nimport { useQuery } from \"utils\";\nimport { VideoList } from \"./Video\";\n\nconst cache = {\n  id: \"\",\n  post: {} as Post,\n  HTML: \"\"\n};\n\nexport default () => {\n  const id = useQuery().get(\"id\")!;\n  if (!id) return <></>;\n  const u: any = useRef(null);\n  const [post, setPost] = useState<Post>({});\n  useEffect(() => {\n    (async () => {\n      let post = cache.post;\n      if (post.id !== id) {\n        post = await getPostDetails(id);\n        cache.post = post;\n        cache.id = id;\n        cache.HTML = snarkdown(post.content);\n      }\n      setPost(post);\n      u.current.innerHTML = cache.HTML;\n    })();\n  }, [id]);\n  return (\n    <Flex column>\n      <h1>{post.title || \"少男祈祷中……\"}</h1>\n      <article ref={u}></article>\n      {post.status === \"public\" ? (\n        <VideoList postId={id} />\n      ) : post.status ? (\n        <div className=\"copyright\">版权原因，该番剧未上架，请支持正版</div>\n      ) : (\n        <></>\n      )}\n    </Flex>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Input, Avatar, ICSSInJSStyle, Flex } from \"@fluentui/react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { avatar, isLogin, user } from \"services/user\";\n\nexport default () => {\n  const history = useHistory();\n  const [data, setData] = useState({ isLogin: true });\n\n  useEffect(() => {\n    (async () => {\n      setData({\n        isLogin: await isLogin()\n      });\n    })();\n  }, []);\n  return (\n    <Flex styles={headerStyle}>\n      <Link to={data.isLogin ? `/` : `/login`}>\n        <Avatar size=\"larger\" image={avatar(user?.qq)} />\n      </Link>\n      <Flex styles={searchStyle}>\n        <Input\n          fluid\n          icon=\"search\"\n          onKeyPress={evt => {\n            if (evt.key === \"Enter\") {\n              history.push(`/search?key=${evt.currentTarget.value}`);\n            }\n          }}\n        />\n      </Flex>\n    </Flex>\n  );\n};\n\nconst headerStyle: ICSSInJSStyle = {\n  padding: \"4px 8px\",\n  alignItems: \"center\",\n  marginBottom: \"24px\"\n};\n\nconst searchStyle: ICSSInJSStyle = {\n  flexGrow: 1,\n  margin: \"0 8px 0 12px\"\n};\n","import React from \"react\";\nimport { Flex } from \"@fluentui/react\";\n\nexport default () => (\n  <Flex\n    styles={{\n      height: \"48px\"\n    }}\n  ></Flex>\n);\n","import React from \"react\";\nimport { Route } from \"react-router-dom\";\nimport CacheRoute, { CacheSwitch } from \"react-router-cache-route\";\nimport { HomePage, LoginPage, PostPage, VideoPage, SearchPage } from \"pages\";\nimport Header from \"components/Header\";\nimport Footer from \"components/Footer\";\n\nexport default () => {\n  return (\n    <>\n      <Header />\n      <CacheSwitch>\n        <CacheRoute path=\"/search\">\n          <SearchPage />\n        </CacheRoute>\n        <Route path=\"/video\">\n          <VideoPage />\n        </Route>\n        <CacheRoute path=\"/post\">\n          <PostPage />\n        </CacheRoute>\n        <Route path=\"/login\">\n          <LoginPage />\n        </Route>\n        <CacheRoute path=\"/\">\n          <HomePage />\n        </CacheRoute>\n      </CacheSwitch>\n      <Footer />\n    </>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider, themes } from \"@fluentui/react\";\nimport * as serviceWorker from \"serviceWorker\";\nimport \"index.css\";\nimport App from \"App\";\nimport { useMediaQuery, disableScreenScale } from \"utils\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\ndisableScreenScale();\n\nfunction Index() {\n  const darkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n  const theme = React.useMemo(\n    () => (darkMode ? themes.teamsDark : themes.teams),\n    [darkMode]\n  );\n  return (\n    <Provider theme={theme}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  );\n}\n\nReactDOM.render(<Index />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}